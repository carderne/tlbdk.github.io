---
layout: post
title:  "fscrypt setup on Ubuntu 18.10"
date:   2018-10-22 19:30:00 +0200
categories: FSCrypt
permalink: /ubuntu/2018/10/22/fscrypt.html
---

Enable encryption on EXT4:

``` bash
export $DEVICE=/dev/sda1
getconf PAGE_SIZE
tune2fs -l $DEVICE | grep 'Block size'
tune2fs -O encrypt /dev/device
```

Install fscrypt:

``` bash
apt-get install fscrypt libpam-fscrypt
sudo pam-auth-update
```

Fix keyinit session binding stuff:

/usr/share/pam-configs/keyinit-fix :

``` text
Name: keyinit fix
Default: yes
Priority: 0
Session-Type: Additional
Session:
	optional	pam_keyinit.so force revoke
```

Update pam files:

``` bash
pam-auth-update
```

Setup fscrypt:

``` bash
fscrypt setup
fscrypt setup /
fscrypt encrypt /encrypted
```